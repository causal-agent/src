.Dd December 20, 2019
.Dt IMBOX 1
.Os
.
.Sh NAME
.Nm imbox
.Nd IMAP to mboxrd
.
.Sh SYNOPSIS
.Nm
.Op Fl vw
.Op Fl h Ar host
.Op Fl m Ar mailbox
.Op Fl p Ar port
.Op Fl s Ar search
.Ar user
.
.Sh DESCRIPTION
The
.Nm
utility exports messages from an IMAP mailbox
to the mboxrd format on standard output.
IMAP login is performed as
.Ar user
with a password read from
.Pa /dev/tty ,
or standard input if
.Fl w
is used.
.
.Pp
The arguments are as follows:
.Bl -tag -width Ds
.It Fl h Ar host
Connect to
.Ar host .
The default host is
.Li imap.fastmail.com .
TLS without STARTTLS is assumed.
.
.It Fl m Ar mailbox
Export messages from
.Ar mailbox .
The default mailbox is INBOX.
.
.It Fl p Ar port
Connect to
.Ar port .
The default port is 993.
.
.It Fl s Ar search
Export messages matching
.Ar search .
The default search is
.Ql SUBJECT \(dq[PATCH\(dq .
.
.It Fl v
Log IMAP protocol to standard error.
.
.It Fl w
Read the IMAP password from standard input.
.El
.
.Sh EXAMPLES
.Bd -literal
imbox june@causal.agency | git am
.Ed
.
.Sh STANDARDS
.Bl -item
.It
.Rs
.%A M. Crispin
.%Q University of Washington
.%T INTERNET MESSAGE ACCESS PROTOCOL - VERSION 4rev1
.%I IETF
.%N RFC 3501
.%D March 2003
.%U https://tools.ietf.org/html/rfc3501
.Re
.It
.Rs
.%A E. Hall
.%T The application/mbox Media Type
.%I IETF
.%N RFC 4155
.%D September 2005
.%U https://tools.ietf.org/html/rfc4155
.Re
.El
